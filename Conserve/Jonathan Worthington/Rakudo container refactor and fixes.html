https://use-perl.github.io/user/JonathanWorthington/journal/37834/
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of JonathanWorthington: Rakudo container refactor and fixes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Rakudo container refactor and fixes</h1>
<h2><a href="/user/JonathanWorthington/">JonathanWorthington</a> on 2008-11-09T11:17:40</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>With some Rakudo days to catch up on post-vacation, and knowing Patrick was keen to get some container changes rolling, I made a second Rakudo day this week on Thursday. While waiting for Patrick to show up (we're quite a few timezones apart), I hit the RT queue.</p>

<ul>
  <li>I got an easy start to the day - finding a ticket that covered an issue pmichaud++ had resolved already and closing it. The issue in question was to do with making objects stringify to something rather than giving an error - this now happens. Further, you can write an Str method on a class that returns a string now to override this behavior.</li>
  <li>Here's teamwork. Last night, Carl Masak reported a bug when you wanted to inherit from a namespaced class. I said I'd look at it today. In the meantime, Moritz got some unit tests written. I went to the ticket in RT today to find that Chris Dolan had already sent in a patch to resolve the issue, leaving me to review it, test it and apply it.</li>
  <li>Spent quite a while trying to get if blocks that take a lambda to work (the idea is that you can capture the expression that was evaluated as the conditional). Got close, but something was messed up in the code generation. Then put it aside to work out the container changes.</li>
</ul>

<p>Once Pm appeared, we dug into the refactoring, in a branch. The aim was to fix up various container semantics, and do various things correctly that we weren't doing before. As a side-effect, it would also aid memory usage. I started doing the big changes and got us down to failing under 2% of the regression tests that we passed before starting the refactor in just a few hours, and had various "unexpected successes" too (where TODO tests start to pass). I then worked with Patrick to track down some of the others, before finishing up my talk for the weekend's Twin City Perl Workshop and getting some sleep in before that. When I checked in on the IRC channel the next day, Patrick had finished and merged the branch. Over the coming days we'll probably find some more tests that we can now un-skip as a result of these fixes.</p>

<p>Thanks go to Vienna.pm for funding Thursday's work, and being a big part of making Twin City Perl Workshop a really good one.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

