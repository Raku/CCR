https://use-perl.github.io/user/JonathanWorthington/journal/38273/
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of JonathanWorthington: Rakudo: Type registry and 'use' changes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Rakudo: Type registry and 'use' changes</h1>
<h2><a href="/user/JonathanWorthington/">JonathanWorthington</a> on 2009-01-13T13:04:28</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Since pmichaud++'s excellent branch of Rakudo refactors has been merged into trunk, I've been digging back in to my Hague Grant tasks. Me being, well, me, I'm behind schedule. Happily, this week I've got few other jobs on my plate to distract me and I'm hoping to get somewhat caught up. So, this should be the first in a bunch of posts this week about stuff that I'm working on. :-)</p>

<p>I'm happy to report that the first three tasks are now completed.</p>

<ul>
  <li>Modifications to Rakudo actions/guts so that we registering classes, roles, subset types and routines in the namespace as we are compiling. These will be stub insertions that will be replaced by the Real Thing once we have it. - <b>Actually after discussion it didn't end up quite being done like this, but rather registering things in the compiler's internal symbol table. Of course, existing types are in the namespace though. Anyway, done.</b></li>
  <li>Switching us to really do "use" at compile time; last time I tried this, it broke things in pre-compiled modules, but now this needs to be figured out properly. - <b>Well, we've switched. I think there may still be some problems to track down that affect November, but we are now doing use at compile time, at the point we encounter the directive.</b></li>
  <li>Elimination of the hack that restricts us to using only type names that start with an uppercase character. - <b>Done. You can now write subs starting with uppercase letters and have them behave like subs, and classes/roles/enums/subset types with lowercase letters and have them behave like types.</b></li>
</ul>

<p>First I did a branch for the type registry stuff, which never did get merged, but served as a good "research project". I then cherry picked bits from it and did the final implementation directly in trunk, the final patch switching on the registry. No spectests have been regressed on, so I'm quite hopeful that November and other projects will see no regressions from this change.</p>

<p>Anyway, back to work and maybe more news later on today!</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

